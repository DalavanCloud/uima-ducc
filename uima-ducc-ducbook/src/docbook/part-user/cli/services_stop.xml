<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
  <!-- ************************************ Service Stop ********************************** -->
  <section id="ducc.cli.service.stop" xreflabel="ducc_services stop">
    <title>ducc_services --stop</title>

    <para>
      <emphasis>The source for this section is ducc_ducbook/documents/part-user/cli/service_stop.xml</emphasis>
    </para>

    <para>
      <emphasis>Description:</emphasis>
      <variablelist>
        <varlistentry>
          <term  />
          <listitem>

            <para>
              The <emphasis role="bold">stop</emphasis> function instructs DUCC to stop some number of service
              instances.  If no specific number is specified, all instances are stopped.  This is used only
              for registered services.  Use <xref linkend="ducc.cli.service_cancel"/> to stop submitted services.              
            </para>

          </listitem>
        </varlistentry>
      </variablelist>
    </para>

    <para>
      <emphasis>Usage:</emphasis>
      <variablelist>
        <varlistentry>
          <term  />
          <listitem>
            <para>
              See the <xref linkend="ducc.cli.service.overview" /> for general usage considerations for
              <emphasis role="bold">ducc_services</emphasis>.
            </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </para>

    <para>
      <emphasis>Service Stop Options:</emphasis>

      <variablelist>
        <varlistentry>
          <term  />
          <listitem>
            <para>
              <emphasis role="bold">--stop [service id]</emphasis>
              <variablelist>
                <varlistentry>
                  <term  />
                  <listitem>
                    <para>
                      This indicates that a service is to be stopped.  The <emphasis role="bold">service id</emphasis>
                      is either the numeric ID assigned by DUCC when the service is registered, or the
                      service endpoint string.
                    </para>
                    <para>
                      Example:
                      <screen>
ducc_services --stop 23
ducc_services --stop UIMA-AS:Service23:tcp://bob.com:12345
                      </screen>
                    </para>                  
                  </listitem>
                </varlistentry>
              </variablelist>
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term  />
          <listitem>
            <para>
              <emphasis role="bold">--instances [integer]</emphasis>
              <variablelist>
                <varlistentry>
                  <term  />
                  <listitem>
                    <para>
                      This is the number of instances to stop.  If omitted, all instances for the 
                      service are stopped.  If a number is specified, then only the specified number
                      of instances are stopped.  Thus if ten instances are running and
                      <emphasis>ducc_services --stop 33 --instances 5</emphasis> is issued, five (randomly selected)
                      service instances ar stopped for service 33, leaving five running.  The registry is
                      updated only if the <emphasis>--update</emphasis> option is specified.  The registered
                      number of instances is never reduced to 0.
                    </para>
                    <para>
                      Example:
                      <literallayout>
ducc_services --stop 23 --intances 5
ducc_services --stop UIMA-AS:Service23:tcp://bob.com:12345 \
              --instances 3 --update
                      </literallayout>
                    </para>                  
                  </listitem>
                </varlistentry>
              </variablelist>
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term  />
          <listitem>
            <para>
              <emphasis role="bold">--update</emphasis>
              <variablelist>
                <varlistentry>
                  <term  />
                  <listitem>
                    <para>
                      If specified, the registry is updated to the total number of instances remaining, but
                      is never reduced below 1.
                    </para>
                    <para>
                      Example:
                      <literallayout>
ducc_services --stop UIMA-AS:Service23:tcp://bob.com:12345 \
              --instances 3 --modify
                      </literallayout>
                    </para>                  
                  </listitem>
                </varlistentry>
              </variablelist>
            </para>
          </listitem>
        </varlistentry>
      </variablelist>

    </para>

  </section>

