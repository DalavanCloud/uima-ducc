<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<chapter id="ducc.cli">
  <title>Command Line Interface (CLI)</title>

    <para>
      <emphasis>The source for this chapter is ducc_ducbook/documents/part-user/chapter-cli.xml</emphasis>
    </para>
  
  <para>
    The Command Line Interface is provided in several forms:
    <orderedlist>
      <listitem>
        <para>
          A Java "main" class, suitable for invoking from user-supplied scripting such as Ant or Python.
          Users of this must set the Java CLASSPATH to include a subset of the jar files supplied with DUCC.
        </para>
        <para>
          To run the commands directly from Java the CLASSPATH must be set correctly and an environment
          variable, <filename>DUCC_HOME</filename> must be set.
        </para>
        <variablelist>
          <varlistentry>
            <term><emphasis role="bold">DUCC_HOME </emphasis></term>
            <listitem>
              <para>
                Set DUCC_HOME to the location where DUCC is installed.  For example:
                <screen>export DUCC_HOME=/home/ducc/ducc_runtime</screen>
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term><emphasis role="bold">CLASSPATH </emphasis></term>
            <listitem>
              <para>
              The CLASSPATH must include all of the following elements, relative to DUCC_HOME:
              <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="user-classpath.xml" />
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
      </listitem>
      <listitem>
        <para>
        Executable jars for each CLI command.  These obiviate the need to establish a classpath but do require
        DUCC_HOME to be set:
        <screen>export DUCC_HOME=/home/ducc/ducc_runtime</screen>
        </para>
      </listitem>
      <listitem>
        <para>
          A script wrapper to the Java "main" that completely establishes the environment.  These wrappers use 
          the execubable jars, establishing the DUCC environment and obiviating the need to set DUCC_HOME. 
        </para>
        <para>
          While not required, it may be useful to put the DUCC bin directory into your path:
          <screen>export PATH=$PATH:/home/ducc/ducc_runtime/bin</screen>
        </para>
      </listitem>
    </orderedlist>
  </para>
 
  <para>
    The following actions may be taken using the CLI:
    <orderedlist>
      <listitem>
        <para>
        Submit a job for ececution.
        </para>
      </listitem>
      <listitem>
        <para>
        Cancel a job in progress.
        </para>
      </listitem>
      <listitem>
        <para>
        Request a reservation of full or partial machines.
        </para>
      </listitem>
      <listitem>
        <para>
        Cancel a reservation.
        </para>
      </listitem>
      <listitem>
        <para>
        Monitor the progress of a job that is already submitted.
        </para>
      </listitem>
      <listitem>
        <para>
        Submit a service for execution.
        </para>
      </listitem>
      <listitem>
        <para>
        Cancel a service.
        </para>
      </listitem>
      <listitem>
        <para>
        Register a service.
        </para>
      </listitem>
      <listitem>
        <para>
        Unegister a service.
        </para>
      </listitem>
      <listitem>
        <para>
        Start a registered service (if not auto-started).
        </para>
      </listitem>
      <listitem>
        <para>
        Stop a registered service.
        </para>
      </listitem>
    </orderedlist>

    The next sections describe these actions in detail.
  </para>

  <para>
    
  </para>


  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/submit.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/cancel.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/reserve.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/unreserve.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/monitor.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/service_submit.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/service_cancel.xml" />
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="cli/services.xml" />

</chapter>
