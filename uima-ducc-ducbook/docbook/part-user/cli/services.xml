<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
  <!-- ************************************ Service Overview ********************************** -->
  <section id="ducc.cli.service.overview" xreflabel="DUCC Service CLI Overview">
    <title>ducc_services</title>

    <para>
      <emphasis>The source for this section is ducc_ducbook/documents/part-user/cli/service_api.xml</emphasis>
    </para>

    <para>
      <emphasis>Description:</emphasis>
      <variablelist>
        <varlistentry>
          <term  />
          <listitem>
            
            <para>
              The <emphasis>ducc_services</emphasis> CLI is used to manage service registration. It
              has a number of functions as listed below. 
              Additionally the <emphasis>ducc_services</emphasis> CLI wraps <emphasis>ducc_service_submit</emphasis>
              and <emphasis>ducc_service_cancel</emphasis> for convenience.
            </para>
            
            <para>
              The functions include:
            </para>
            
            <variablelist>
              <varlistentry>
                <term> <emphasis role="bold">Register</emphasis></term>
                <listitem>
                  <para>
                    This <emphasis>registers</emphasis> a service with the Service Manager. A registered
                    service is retained by DUCC until it is unregistered.
                  </para>
                </listitem>
              </varlistentry>
              
              <varlistentry>
                <term> <emphasis role="bold">Unregister</emphasis></term>
                <listitem>
                  <para>
                    This <emphasis>unregisters</emphasis> a service with the Service Manager. When a service
                    is unregistered DUCC optionally stops the service instance, if any, and discards all knowledge of it.
                  </para>
                </listitem>
              </varlistentry>
            
              <varlistentry>
                <term> <emphasis role="bold">Start</emphasis></term>
                <listitem>
                  <para>
                    The <emphasis>start</emphasis> function instructs DUCC to alllocate resources for a service
                    and to start it in those resources.  The service remains running until explictly stopped.  DUCC
                    will attempt to keep the service instances running if they should fail.  The <emphasis>start</emphasis>
                    function is also used to increase the number of running service instances if desired.
                  </para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term> <emphasis role="bold">Stop</emphasis></term>
                <listitem>
                  <para>
                    The <emphasis>stop</emphasis> function stops some or all service instances.
                  </para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term> <emphasis role="bold">Query</emphasis></term>
                <listitem>
                  <para>
                    The <emphasis>query</emphasis> function returns detailed information about all known services,
                    both registerd and otherwise.
                  </para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term> <emphasis role="bold">Modify</emphasis></term>
                <listitem>
                  <para>
                    The <emphasis>modify</emphasis> function allows some aspectes of a registered service to be
                    updated without re-registereing the service.  It optionally alters the running service
                    instances to conform with the updates.
                  </para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term> <emphasis role="bold">Submit</emphasis></term>
                <listitem>
                  <para>
                    Use the <emphasis role="bold">ducc_service_submit</emphasis> command to submit a
                    service.  This is available only through the command-line wrapper.
                  </para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term> <emphasis role="bold">Cancel</emphasis></term>
                <listitem>
                  <para>
                    Use the <emphasis role="bold">ducc_service_cancel</emphasis> command to cancel a
                    submitted service.  This is available only through the command-line wrapper.
                  </para>
                </listitem>
              </varlistentry>
            </variablelist>

          </listitem>
        </varlistentry>
      </variablelist>
    </para>

    <para>
      <emphasis>Usage:</emphasis>
      <variablelist>
        <varlistentry>
          <term  />
          <listitem>

            <variablelist>
              <varlistentry>
                <term><emphasis role="bold">Script wrapper</emphasis></term>
                <listitem><para><emphasis>$DUCC_HOME</emphasis>/bin/ducc_services</para></listitem>
              </varlistentry>

              <varlistentry>
                <term><emphasis role="bold">Executble Jar</emphasis></term>
                <listitem><para>java -jar <emphasis>$DUCC_HOME</emphasis>/lib/ducc-services.jar</para></listitem>
              </varlistentry>
              
              <varlistentry>
                <term><emphasis role="bold">Java main</emphasis></term>
                <listitem><para>org.apache.uima.ducc.cli.DuccServiceApi</para></listitem>
              </varlistentry>
                            
            </variablelist>

            <para>
              The <emphasis role="bold">ducc_services</emphasis> CLI requires one of the verbs listed above
              as the first argument.  The subsequent arguments are determned by the verb.
            </para>

          </listitem>
        </varlistentry>
      </variablelist>
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="services_register.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="services_start.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="services_stop.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="services_modify.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="services_query.xml" />
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"  href="services_sub_can.xml" />

  </section>

