<?xml version="1.0" encoding="UTF-8"?>
<!-- Licensed to the Apache Software Foundation (ASF) under one or more contributor 
	license agreements. See the NOTICE file distributed with this work for additional 
	information regarding copyright ownership. The ASF licenses this file to 
	you under the Apache License, Version 2.0 (the "License"); you may not use 
	this file except in compliance with the License. You may obtain a copy of 
	the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required 
	by applicable law or agreed to in writing, software distributed under the 
	License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS 
	OF ANY KIND, either express or implied. See the License for the specific 
	language governing permissions and limitations under the License. -->

<!-- This pom serves as the release top level project for the multi-module 
	project UIMA-DUCC -->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>org.apache.uima</groupId>
		<artifactId>uima-ducc-parent</artifactId>
		<version>0.8.0-SNAPSHOT</version>
		<relativePath>uima-ducc-parent/pom.xml</relativePath>
	</parent>

	<artifactId>uima-ducc</artifactId>
	<packaging>pom</packaging>
	<version>0.8.0-SNAPSHOT</version>
	<name>Apache UIMA-DUCC: ${project.artifactId}</name>
	<description>The top project for UIMA-DUCC</description>
	<url>${uimaWebsiteUrl}</url>


<!-- Special inheritance note
       even though the <scm> element that follows is exactly the
       same as those in super poms, it cannot be inherited because
       there is some special code that computes the connection elements
       from the chain of parent poms, if this is omitted.

       Keeping this a bit factored allows cutting/pasting the <scm>
       element, and just changing the following two properties -->
  <scm>
    <connection>
      scm:svn:http://svn.apache.org/repos/asf/uima/uima-ducc/trunk
    </connection>
    <developerConnection>
      scm:svn:https://svn.apache.org/repos/asf/uima/uima-ducc/trunk
    </developerConnection>
    <url>
      http://svn.apache.org/viewvc/uima/uima-ducc/trunk
    </url>
  </scm>

    <!--  name the artifacts (zip,tar) -->
	<properties>
		<assemblyFinalName>uima-ducc-${project.version}</assemblyFinalName>
	</properties>

	<!-- declare dependency on each DUCC project -->
	<dependencies>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-common</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-transport</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-agent</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-pm</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-rm</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-sm</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-orchestrator</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-cli</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-jd</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-web</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.uima</groupId>
			<artifactId>uima-ducc-examples</artifactId>
			<version>${project.version}</version>
		</dependency>
	</dependencies>

	<build>
		<resources />

		
		
		<plugins>
      
      <!-- plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.6</version>
        <executions>
          
          <execution>
            <id>download-jquery-ui</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                 <get src="http://jquery-ui.googlecode.com/files/jquery-ui-1.8.4.zip" 
                     dest="${project.build.directory}/jquery-ui-1.8.4.zip" /> 
                 <unzip src="${project.build.directory}/jquery-ui-1.8.4.zip" dest="${project.build.directory}/jquery-ui-1.8.4"/>
               
              </target>
              
            </configuration>
          </execution>


     
          <execution>
            <id>download-DataTables</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                 <get src="http://datatables.net/releases/DataTables-1.9.1.zip" 
                     dest="${project.build.directory}/DataTables-1.9.1.zip" /> 
                 <unzip src="${project.build.directory}/DataTables-1.9.1.zip" dest="${project.build.directory}/DataTables-1.9.1"/>

                 <get src="https://github.com/DataTables/Plugins/blob/master/api/fnReloadAjax.js" 
                     dest="${project.build.directory}/fnReloadAjax.js" /> 
                 


              </target>
              
            </configuration>
          </execution>
          
          
            <execution>
            <id>download-cluetip</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                 <get src="https://github.com/kswedberg/jquery-cluetip/blob/master/jquery.cluetip.css" 
                     dest="${project.build.directory}/jquery.cluetip.css" /> 
                 <get src="https://github.com/kswedberg/jquery-cluetip/blob/master/jquery.cluetip.js" 
                     dest="${project.build.directory}/jquery.cluetip.js" /> 
                 


              </target>
              
            </configuration>
          </execution>
          
          
          <execution>
            <id>download-jgrowl</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                 <get src="https://github.com/stanlemon/jGrowl/blob/1.2.7/jquery.jgrowl.css" 
                     dest="${project.build.directory}/jquery.jgrowl.css" /> 
                 <get src="https://github.com/stanlemon/jGrowl/blob/1.2.7/jquery.jgrowl.js" 
                     dest="${project.build.directory}/jquery.jgrowl.js" /> 
                 


              </target>
              
            </configuration>
          </execution>
          
          <execution>
            <id>download-jquery</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                 <get src="http://code.jquery.com/jquery-1.9.1.js" 
                     dest="${project.build.directory}/jquery-1.9.1.js" /> 
              </target>
              
            </configuration>
          </execution>
          <execution>
            <id>download-sorttable</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <target>
                 <get src="http://kryogenix.org/code/browser/sorttable/sorttable.js" 
                     dest="${project.build.directory}/sorttable.js" /> 
              </target>
              
            </configuration>
          </execution>         
        </executions>
      </plugin -->
      
      
      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <id>generate checksums for binary artifacts</id>
            <goals><goal>run</goal></goals>
            <phase>verify</phase>
            <configuration>
              <target>
                <checksum algorithm="sha1" format="MD5SUM">
                  <fileset dir="${project.build.directory}">
                    <include name="*.zip" />
                    <include name="*.gz" />
                  </fileset>
                </checksum>
                <checksum algorithm="md5" format="MD5SUM">
                  <fileset dir="${project.build.directory}">
                    <include name="*.zip" />
                    <include name="*.gz" />
                  </fileset>
                </checksum>
              </target>
            </configuration>
          </execution>
        </executions>
      </plugin>
      
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <!-- use the dependency:unpack goal to unpack the AMQ binary release --> 
            <id>unpack-activemq-distro</id>
            <phase>prepare-package</phase>
            <goals><goal>unpack</goal></goals>
            <configuration>
              <overWriteIfNewer>true</overWriteIfNewer>
              <artifactItems>
                <artifactItem>
                  <groupId>org.apache.activemq</groupId>
                  <artifactId>apache-activemq</artifactId>
                  <version>${org.apache.activemq.version}</version>
                  <type>zip</type>
                  <classifier>bin</classifier>
                  <outputDirectory>${project.build.directory}/apache-activemq</outputDirectory>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
          
          
          <execution>
            <!-- use the dependency:unpack goal to unpack the Jetty release --> 
            <id>unpack-jetty-distro</id>
            <phase>prepare-package</phase>
            <goals><goal>unpack</goal></goals>
            <configuration>
              <overWriteIfNewer>true</overWriteIfNewer>
              <artifactItems>
                <artifactItem>
                  <groupId>org.eclipse.jetty</groupId>
                  <artifactId>jetty-distribution</artifactId>
                  <version>${jetty.version}</version>
                  <type>zip</type>
                  <outputDirectory>${project.build.directory}/jetty</outputDirectory>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
          
          
        </executions>        
      </plugin>
      
			<plugin>
				<artifactId>maven-resources-plugin</artifactId>
				<version>2.5</version>
				<executions>
					<execution>
						<id>copy-resources</id>
						<phase>process-resources</phase>
						<goals>
							<goal>copy-resources</goal>
						</goals>
						<configuration>
							<overwrite>true</overwrite>
							<outputDirectory>target/maven-shared-archive-resources/META-INF</outputDirectory>
							<resources>
								<resource>
									<directory>.</directory>
									<includes>
										<include>LICENSE</include>
										<include>NOTICE</include>
									</includes>
									
									
								</resource>
							</resources>
						</configuration>
					</execution>
				</executions>
			</plugin>

         <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-changes-plugin</artifactId>
          <version>2.8</version>
          <executions>
            <execution>
              <id>ducc-jira-report</id>
              <goals><goal>jira-report</goal></goals>
              
              <phase>generate-resources</phase>        
              <configuration>
                <useJql>true</useJql>
                <fixVersionIds>${jira.version}</fixVersionIds>
                <component>DUCC</component>
                <columnNames>Type,Key,Status,Summary</columnNames>
                <resolution>Fixed</resolution>
                <status>Closed,Resolved</status>
                <sortColumnNames>Type, Status, Key</sortColumnNames>
                <outputDirectory>${basedir}/issuesFixed/</outputDirectory>
                <maxEntries>1000</maxEntries> 
              </configuration>
            </execution>
          </executions>
        </plugin>
        <!-- run Release Audit Tool (RAT) on src and bin distrs -->
      	<!-- plugin>
	               
        	<groupId>org.apache.rat</groupId>
        	<artifactId>apache-rat-plugin</artifactId>
        	<executions>
          		<execution>
            		<id>ducc-rat</id>
            		<configuration>
              			<excludes>
                            <exclude>uima-ducc/target/**</exclude>
                            <exclude>uima-ducc/src/main/**</exclude>
                            
              			    <exclude>uima-ducc-ducbooks/target/**</exclude>
              			    <exclude>uima-ducc-ducbooks/.project</exclude>
              			    <exclude>uima-ducc-ducbooks/.settings/**</exclude>
              			    <exclude>uima-ducc/target/**</exclude>
              			    <exclude>uima-ducc/.classpath</exclude>
              			    <exclude>uima-ducc/.project</exclude>
              			    <exclude>uima-ducc/.settings/**</exclude>

              			    <exclude>uima-ducc-agent/.classpath</exclude>
              			    <exclude>uima-ducc-agent/.project</exclude>
              			    <exclude>uima-ducc-agent/.settings/**</exclude>
              			    <exclude>uima-ducc-agent/target/**</exclude>

              			    <exclude>uima-ducc-cli/.classpath</exclude>
              			    <exclude>uima-ducc-cli/.project</exclude>
              			    <exclude>uima-ducc-cli/.settings/**</exclude>
              			    <exclude>uima-ducc-cli/target/**</exclude>


              			    <exclude>uima-ducc-common/.classpath</exclude>
              			    <exclude>uima-ducc-common/.project</exclude>
              			    <exclude>uima-ducc-common/.settings/**</exclude>
              			    <exclude>uima-ducc-common/target/**</exclude>

              			    <exclude>uima-ducc-jd/.classpath</exclude>
              			    <exclude>uima-ducc-jd/.project</exclude>
              			    <exclude>uima-ducc-jd/.settings/**</exclude>
              			    <exclude>uima-ducc-jd/target/**</exclude>

              			    <exclude>uima-ducc-orchestrator/.classpath</exclude>
              			    <exclude>uima-ducc-orchestrator/.project</exclude>
              			    <exclude>uima-ducc-orchestrator/.settings/**</exclude>
              			    <exclude>uima-ducc-orchestrator/target/**</exclude>

              			    <exclude>uima-ducc-parent/target/**</exclude>

              			    <exclude>uima-ducc-pm/.classpath</exclude>
              			    <exclude>uima-ducc-pm/.project</exclude>
              			    <exclude>uima-ducc-pm/.settings/**</exclude>
              			    <exclude>uima-ducc-pm/target/**</exclude>

              			    <exclude>uima-ducc-rm/.classpath</exclude>
              			    <exclude>uima-ducc-rm/.project</exclude>
              			    <exclude>uima-ducc-rm/.settings/**</exclude>
              			    <exclude>uima-ducc-rm/target/**</exclude>
              			    
              			    <exclude>uima-ducc-sm/.classpath</exclude>
              			    <exclude>uima-ducc-sm/.project</exclude>
              			    <exclude>uima-ducc-sm/.settings/**</exclude>
              			    <exclude>uima-ducc-sm/target/**</exclude>

              			    <exclude>uima-ducc-transport/.classpath</exclude>
              			    <exclude>uima-ducc-transport/.project</exclude>
              			    <exclude>uima-ducc-transport/.settings/**</exclude>
              			    <exclude>uima-ducc-transport/target/**</exclude>

                			<exclude>README*</exclude>
                			<exclude>RELEASE_NOTES*</exclude>
              			</excludes>
            		</configuration>
          		</execution>
        	</executions>
      	</plugin -->

	
		</plugins>
		<!-- /pluginManagement -->
	</build>

<profiles>
    <profile>
      <id>apache-release</id>
      <build>
        <plugins>
          <!-- https://issues.apache.org/jira/browse/UIMA-2008 -->
          <!-- no maven deployment, do manual checksums -->
          <!-- source-release artifact deployed from apache mirrors -->
          <plugin>
            <artifactId>maven-deploy-plugin</artifactId>      
            <configuration>
              <skip>true</skip>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>generate checksums for source-release</id>
                <goals><goal>run</goal></goals>
                <phase>verify</phase>
                <configuration>
                  <target>
                    <checksum algorithm="sha1" format="MD5SUM" file="${project.build.directory}/${project.artifactId}-${project.version}-source-release.zip" />
                    <checksum algorithm="md5" format="MD5SUM" file="${project.build.directory}/${project.artifactId}-${project.version}-source-release.zip" />
                  </target>
                </configuration>
              </execution>
            </executions>
          </plugin>
        <!-- Run jira report -->
        <!-- depends on having -DjiraVersion set -->
          <plugin>
            <artifactId>maven-changes-plugin</artifactId>
            <version>2.8</version>
            <executions>
              <execution>
                <id>default-cli</id>
                <configuration>
                  <fixVersionIds>${jiraVersion}</fixVersionIds>
                  <sortColumnNames>Type, Status, Key</sortColumnNames>
                </configuration>
              </execution>
            </executions>  
          </plugin>
        
        </plugins>
      </build>
    </profile>
    
  </profiles>

    <!-- Include all ducc modules  -->
	<modules>
        <module>uima-ducc-parent</module>
        <module>uima-ducc-cli</module>
        <module>uima-ducc-jd</module>
        <module>uima-ducc-pm</module>
        <module>uima-ducc-rm</module>
        <module>uima-ducc-sm</module>
        <module>uima-ducc-orchestrator</module>
        <module>uima-ducc-common</module>
        <module>uima-ducc-transport</module>
        <module>uima-ducc-agent</module>
        <module>uima-ducc-duccdocs</module>
        <module>uima-ducc-web</module>		
        <module>uima-ducc-examples</module>		
	</modules>
</project>

